<UserControl x:Class="UniAcamanageWpfApp.Views.InfoQueryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d"
             d:DesignHeight="800"
             d:DesignWidth="1000"
             MinHeight="700"
             MinWidth="800">

    <!-- 动画资源 -->
    <UserControl.Resources>
        <!-- 卡片渐变动画 -->
        <Storyboard x:Key="FadeInStoryboard">
            <DoubleAnimation 
            Storyboard.TargetName="MainGrid"
            Storyboard.TargetProperty="Opacity"
            From="0" To="1" 
            Duration="0:0:0.3"/>
        </Storyboard>

        <!-- 按钮动画 -->
        <Style TargetType="Button" x:Key="AnimatedButtonStyle">
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <!-- 鼠标悬停时放大 -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1.1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1.1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>

                <!-- 鼠标按下时缩小 -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.9" ScaleY="0.9"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid x:Name="MainGrid" Margin="20" Loaded="Grid_Loaded">
        <TabControl Margin="10" Style="{DynamicResource MaterialDesignTabControl}">

            <!-- 1) 基本信息查询 -->
            <TabItem Header="基本信息查询">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20" Background="White" BorderBrush="#D5D5D5" BorderThickness="1"
                           materialDesign:ShadowAssist.ShadowDepth="Depth1">
                        <StackPanel>
                            <TextBlock FontSize="24" FontWeight="Bold" Text="基本信息查询" Margin="0,0,0,30" 
                          HorizontalAlignment="Center"/>

                            <!-- 信息展示区 -->
                            <Grid Margin="20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <!-- 标签列 -->
                                    <ColumnDefinition Width="*"/>
                                    <!-- 内容列 -->
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- 学号 -->
                                <TextBlock Grid.Row="0" Grid.Column="0" 
                             Text="学号：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="0" Grid.Column="1" 
                            x:Name="StudentIDTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 姓名 -->
                                <TextBlock Grid.Row="1" Grid.Column="0" 
                             Text="姓名：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="1" Grid.Column="1" 
                            x:Name="NameTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 性别 -->
                                <TextBlock Grid.Row="2" Grid.Column="0" 
                             Text="性别：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="2" Grid.Column="1" 
                            x:Name="GenderTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 入学年份 -->
                                <TextBlock Grid.Row="3" Grid.Column="0" 
                             Text="入学年份：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="3" Grid.Column="1" 
                            x:Name="YearOfAdmissionTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 专业 -->
                                <TextBlock Grid.Row="4" Grid.Column="0" 
                             Text="专业：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="4" Grid.Column="1" 
                            x:Name="MajorTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 班级 -->
                                <TextBlock Grid.Row="5" Grid.Column="0" 
                             Text="班级：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="5" Grid.Column="1" 
                            x:Name="ClassTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>

                                <!-- 学籍状态 -->
                                <TextBlock Grid.Row="6" Grid.Column="0" 
                             Text="学籍状态：" 
                             FontSize="18" 
                             VerticalAlignment="Center"
                             Margin="0,0,20,0"/>
                                <TextBox Grid.Row="6" Grid.Column="1" 
                            x:Name="StatusTextBox" 
                            IsReadOnly="True" 
                            FontSize="18"
                            Height="45"
                            Margin="0,10"
                            Background="#F4F6F9" 
                            BorderBrush="#D5D5D5"/>
                            </Grid>
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>

            <!-- 2) 学生个人课表 -->
            <TabItem Header="学生个人课表">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20">
                        <StackPanel>
                            <TextBlock FontSize="20" FontWeight="Bold" Text="学生个人课表" Margin="0,0,0,20" 
                                       HorizontalAlignment="Center"/>
                            <StackPanel Orientation="Vertical">
                                <ComboBox x:Name="SemesterComboBox" Width="300" FontSize="14" Margin="0,10,0,10" 
                                          ToolTip="选择学期"/>
                                <Button Content="查询课表" Width="200" FontSize="16" Margin="10" 
                                        Style="{StaticResource AnimatedButtonStyle}"
                                        HorizontalAlignment="Center" 
                                        Click="QueryPersonalSchedule"/>
                            </StackPanel>
                            <!-- 显示课表 -->
                            <DataGrid x:Name="ScheduleDataGrid" AutoGenerateColumns="True" Margin="0,10" />
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>

            <!-- 3) 课程课表查询 -->
            <TabItem Header="课程课表查询">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20">
                        <StackPanel>
                            <TextBlock FontSize="20" FontWeight="Bold" Text="课程课表查询"
                                       Margin="0,0,0,20"
                                       HorizontalAlignment="Center" />

                            <!-- 课程搜索输入区 -->
                            <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                                <TextBox x:Name="CourseSearchTextBox"
                                         Width="300"
                                         FontSize="14"
                                         Margin="0,0,0,10"
                                         ToolTip="输入课程代码或名称"
                                         TextChanged="CourseSearchTextBox_TextChanged" />
                                <!-- 这里放一个ListBox显示搜索建议 -->
                                <ListBox x:Name="CourseSearchResultListBox"
                                         Visibility="Collapsed"
                                         Width="300"
                                         MaxHeight="150"
                                         SelectionChanged="CourseSearchResultListBox_SelectionChanged" />
                            </StackPanel>

                            <!-- 点击"查询"按钮，或者用户先选了结果后再查询 -->
                            <Button x:Name="QueryCourseBtn"
                                    Content="查询课程"
                                    Width="200"
                                    FontSize="16"
                                    Margin="0,10"
                                    Style="{StaticResource AnimatedButtonStyle}"
                                    HorizontalAlignment="Center"
                                    Click="QueryCourseSchedule" />

                            <DataGrid x:Name="CourseScheduleDataGrid"
                                      AutoGenerateColumns="True"
                                      Margin="0,10" />
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>

            <!-- 4) 教师课表查询 -->
            <TabItem Header="教师课表查询">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20">
                        <StackPanel>
                            <TextBlock FontSize="20" FontWeight="Bold" Text="教师课表查询" 
                          Margin="0,0,0,20"
                          HorizontalAlignment="Center"/>

                            <StackPanel Orientation="Vertical">
                                <TextBox x:Name="TeacherIDTextBox"
                            Width="300"
                            FontSize="14"
                            Margin="0,0,0,20"
                            ToolTip="输入教师工号"
                            materialDesign:HintAssist.Hint="请输入教师工号"
                            HorizontalAlignment="Center"/>
                                <Button Content="查询教师课表"
                            Width="200"
                            FontSize="16"
                            HorizontalAlignment="Center"
                            Margin="0,10"
                            Style="{StaticResource AnimatedButtonStyle}"
                            Click="QueryTeacherSchedule"/>
                            </StackPanel>

                            <!-- 显示教师课表 -->
                            <DataGrid x:Name="TeacherScheduleDataGrid"
                          Margin="10"
                          AutoGenerateColumns="True"
                          IsReadOnly="True"
                          GridLinesVisibility="All"
                          BorderThickness="1"
                          BorderBrush="{DynamicResource MaterialDesignDivider}"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Auto"/>
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>

            <!-- 5) 教室查询 -->
            <TabItem Header="教室查询">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20">
                        <StackPanel>
                            <TextBlock FontSize="20" FontWeight="Bold" Text="教室查询"
                                       Margin="0,0,0,20"
                                       HorizontalAlignment="Center"/>

                            <!-- 查询按钮和数据展示 -->
                            <Button Content="查询教室"
                                    Width="200"
                                    FontSize="16"
                                    HorizontalAlignment="Center"
                                    Margin="0,10"
                                    Style="{StaticResource AnimatedButtonStyle}"
                                    Click="QueryClassroom"/>
                            <DataGrid x:Name="ClassroomDataGrid"
                                      Margin="10"
                                      AutoGenerateColumns="True"/>
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>

            <!-- 6) 考试信息查询 -->
            <TabItem Header="考试信息查询">
                <Grid Margin="20">
                    <materialDesign:Card Margin="10" Padding="20">
                        <StackPanel>
                            <TextBlock FontSize="20" FontWeight="Bold" Text="考试信息查询"
                                       Margin="0,0,0,20"
                                       HorizontalAlignment="Center"/>

                            <StackPanel Orientation="Vertical">
                                <TextBox x:Name="ExamCodeTextBox"
                                         Width="300"
                                         FontSize="14"
                                         Margin="0,0,0,20"
                                         ToolTip="输入考试代码"
                                         HorizontalAlignment="Center"/>
                                <Button Content="查询考试"
                                        Width="200"
                                        FontSize="16"
                                        HorizontalAlignment="Center"
                                        Margin="0,10"
                                        Style="{StaticResource AnimatedButtonStyle}"
                                        Click="QueryExam"/>
                            </StackPanel>

                            <!-- 显示考试信息 -->
                            <DataGrid x:Name="ExamDataGrid"
                                      Margin="10"
                                      AutoGenerateColumns="True"/>
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </TabItem>
        </TabControl>
        <!-- 添加加载指示器 -->
        <materialDesign:Card x:Name="LoadingCard" 
                        Visibility="Collapsed"
                        Background="#80FFFFFF"
                        UniformCornerRadius="0">
            <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                    Value="0"
                    IsIndeterminate="True" 
                    Margin="20"/>
        </materialDesign:Card>
    </Grid>
</UserControl>
